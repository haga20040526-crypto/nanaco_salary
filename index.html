<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµ¦ä¸è¨ˆç®—ãƒ„ãƒ¼ãƒ« (McD Ver.)</title>
    <style>
        /* ãƒã‚¯ãƒ‰ãƒŠãƒ«ãƒ‰é¢¨ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ */
        :root {
            --mcd-red: #DA291C;    /* ãƒã‚¯ãƒ‰ãƒŠãƒ«ãƒ‰ã®èµ¤ */
            --mcd-yellow: #FFC72C; /* ãƒã‚¯ãƒ‰ãƒŠãƒ«ãƒ‰ã®é»„è‰² */
            --bg-color: #fffbea;   /* èƒŒæ™¯è‰²ï¼ˆè–„ã„é»„è‰²ç³»ï¼‰ */
            --text-dark: #333;
        }

        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; padding: 20px; background-color: var(--bg-color); color: var(--text-dark); }
        
        /* ã‚³ãƒ³ãƒ†ãƒŠï¼šä¸Šéƒ¨ã«èµ¤ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆãƒ©ã‚¤ãƒ³ã‚’è¿½åŠ  */
        .container { max-width: 400px; margin: 0 auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-top: 6px solid var(--mcd-red); }
        
        /* ã‚¿ã‚¤ãƒˆãƒ«ã‚’èµ¤ã« */
        h1 { text-align: center; margin-bottom: 20px; font-size: 1.5rem; color: var(--mcd-red); font-weight: 900; }
        
        /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9rem; color: #555; }
        input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; transition: border-color 0.3s; }
        /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã«èµ¤æ ã«ã™ã‚‹ */
        input:focus { border-color: var(--mcd-red); outline: none; }

        /* ãƒœã‚¿ãƒ³ï¼šèµ¤èƒŒæ™¯ã«é»„è‰²æ–‡å­— */
        button { width: 100%; padding: 14px; background-color: var(--mcd-red); color: var(--mcd-yellow); border: none; border-radius: 50px; font-size: 18px; font-weight: 900; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        /* ãƒ›ãƒãƒ¼æ™‚ï¼šè‰²ã‚’åè»¢ */
        button:hover { background-color: var(--mcd-yellow); color: var(--mcd-red); }
        button:active { transform: scale(0.98); }

        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ï¼šè–„ã„é»„è‰²èƒŒæ™¯ã¨é»„è‰²ã®æ ç·š */
        .result-box { margin-top: 25px; background: #fffdf0; padding: 20px; border-radius: 12px; text-align: center; border: 3px solid var(--mcd-yellow); }
        /* åˆè¨ˆé‡‘é¡ã‚’èµ¤è‰²ã§å¼·èª¿ */
        .total-pay { font-size: 2.2rem; font-weight: 900; color: var(--mcd-red); margin: 10px 0; }
        .details { font-size: 0.85rem; color: #666; text-align: left; line-height: 1.6; margin-top: 10px; border-top: 2px dashed var(--mcd-yellow); padding-top: 10px; }
        
        /* ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ç”»é¢ç”¨ */
        .error-screen { text-align: center; margin-top: 50px; color: var(--mcd-red); }

        .hidden { display: none; }
    </style>
</head>
<body id="mainBody" class="hidden">

<div class="container">
    <h1>i'm lovin' it ğŸ’°</h1>
    
    <div class="input-group">
        <label>åŸºæœ¬æ™‚çµ¦ (å††)</label>
        <input type="number" id="hourlyWage" value="1100" placeholder="ä¾‹: 1100">
    </div>

    <div class="input-group">
        <label>é–‹å§‹æ™‚é–“</label>
        <input type="time" id="startTime" value="17:00">
    </div>

    <div class="input-group">
        <label>çµ‚äº†æ™‚é–“</label>
        <input type="time" id="endTime" value="23:00">
    </div>

    <div class="input-group">
        <label>ä¼‘æ†©æ™‚é–“ (åˆ†)</label>
        <input type="number" id="breakTime" value="45" placeholder="ä¾‹: 45">
    </div>

    <button onclick="calculate()">è¨ˆç®—ã™ã‚‹</button>

    <div class="result-box">
        <div style="font-weight:bold; color:#555;">æœ¬æ—¥ã®çµ¦ä¸ç›®å®‰</div>
        <div class="total-pay" id="displayPay">Â¥0</div>
        <div class="details" id="displayDetails">
            è¨ˆç®—ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„
        </div>
    </div>
</div>

<script>
    // ==========================================
    // è¨­å®šã‚¨ãƒªã‚¢ï¼šãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ã“ã“ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„
    // ==========================================
    const APP_PASSWORD = "040802"; 
    // ==========================================

    // ç”»é¢èª­ã¿è¾¼ã¿æ™‚ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼å‡¦ç†
    (function checkPassword() {
        const input = prompt("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
        if (input === APP_PASSWORD) {
            document.getElementById('mainBody').classList.remove('hidden');
        } else {
            document.body.innerHTML = "<div class='error-screen'><h1>ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“</h1><p>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™ã€‚</p></div>";
            document.body.style.display = "block";
            document.body.style.backgroundColor = "#fffbea";
        }
    })();

    function calculate() {
        const wage = parseInt(document.getElementById('hourlyWage').value);
        const startStr = document.getElementById('startTime').value;
        const endStr = document.getElementById('endTime').value;
        const breakMins = parseInt(document.getElementById('breakTime').value) || 0;

        if (!wage || !startStr || !endStr) return;

        const startDate = new Date(`2000-01-01T${startStr}`);
        let endDate = new Date(`2000-01-01T${endStr}`);

        if (endDate < startDate) {
            endDate.setDate(endDate.getDate() + 1);
        }

        const totalDurationMins = (endDate - startDate) / 1000 / 60;
        
        let totalLateRangeMins = 0;
        let totalNormalRangeMins = 0;
        let current = new Date(startDate);

        for (let i = 0; i < totalDurationMins; i++) {
            const h = current.getHours();
            // æ·±å¤œåˆ¤å®š: 22æ™‚ä»¥é™ã€œç¿Œ5æ™‚æœªæº€
            if (h >= 22 || h < 5) {
                totalLateRangeMins++;
            } else {
                totalNormalRangeMins++;
            }
            current.setMinutes(current.getMinutes() + 1);
        }

        let remainingBreak = breakMins;
        if (totalNormalRangeMins >= remainingBreak) {
            totalNormalRangeMins -= remainingBreak;
            remainingBreak = 0;
        } else {
            remainingBreak -= totalNormalRangeMins;
            totalNormalRangeMins = 0;
        }
        if (remainingBreak > 0) {
            totalLateRangeMins -= remainingBreak;
            if (totalLateRangeMins < 0) totalLateRangeMins = 0;
        }

        const finalWorkMins = totalNormalRangeMins + totalLateRangeMins;
        if (finalWorkMins <= 0) {
             document.getElementById('displayPay').innerText = "Â¥0";
             document.getElementById('displayDetails').innerText = "å‹¤å‹™æ™‚é–“ãŒçŸ­ã™ãã¾ã™";
             return;
        }

        const normalPay = Math.floor(wage * (totalNormalRangeMins / 60));
        const lateWage = Math.floor(wage * 1.25);
        const latePay = Math.floor(lateWage * (totalLateRangeMins / 60));
        const totalPay = normalPay + latePay;

        document.getElementById('displayPay').innerText = `Â¥${totalPay.toLocaleString()}`;
        
        const hours = Math.floor(finalWorkMins / 60);
        const mins = finalWorkMins % 60;
        
        document.getElementById('displayDetails').innerHTML = `
            å®Ÿåƒæ™‚é–“: ${hours}æ™‚é–“${mins}åˆ†<br>
            -----------------------<br>
            é€šå¸¸å‹¤å‹™: ${Math.floor(totalNormalRangeMins/60)}æ™‚é–“${totalNormalRangeMins%60}åˆ† (Â¥${normalPay.toLocaleString()})<br>
            æ·±å¤œå‹¤å‹™: ${Math.floor(totalLateRangeMins/60)}æ™‚é–“${totalLateRangeMins%60}åˆ† (Â¥${latePay.toLocaleString()} / æ™‚çµ¦UP!)<br>
            <span style="font-size:0.75rem; color:#999;">â€»ä¼‘æ†©ã¯é€šå¸¸æ™‚é–“å¸¯ã‹ã‚‰å„ªå…ˆçš„ã«æ§é™¤ã—ã¦è¨ˆç®—</span>
        `;
    }
</script>

</body>
</html>
